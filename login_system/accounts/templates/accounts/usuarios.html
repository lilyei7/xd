<!-- Versión original simple sin event listeners complejos -->

<div class="usuarios-container">
    <div class="section-header">
        <h1>Gestión de Usuarios</h1>
        <button class="btn-primary" onclick="showAddUserModal()">
            <i class="fa-solid fa-user-plus"></i> Nuevo Usuario
        </button>
    </div>

    <div class="usuarios-filters">
        <div class="search-box">
            <i class="fa-solid fa-search"></i>
            <input type="text" id="searchUser" placeholder="Buscar usuario...">
        </div>
        <select id="filterRole">
            <option value="todos">Todos los roles</option>
            <option value="admin">Administrador</option>
            <option value="gerente">Gerente</option>
            <option value="empleado">Empleado</option>
        </select>
    </div>

    <div class="usuarios-grid" id="usuariosGrid">
        <!-- Aquí se cargarán los usuarios dinámicamente -->
    </div>
</div>

<!-- Modal para agregar/editar usuario -->
<div id="userModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeUserModal()">&times;</span>
        <h2 id="userModalTitle">Nuevo Usuario</h2>
        <form id="userForm" onsubmit="handleUserSubmit(event)">
            <div class="form-row">
                <div class="form-group">
                    <label for="nombre">Nombre completo:</label>
                    <input type="text" id="nombre" name="nombre" required>
                </div>
                <div class="form-group">
                    <label for="username">Nombre de usuario:</label>
                    <input type="text" id="username" name="username" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">Correo electrónico:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="telefono">Teléfono:</label>
                    <input type="tel" id="telefono" name="telefono">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="rol">Rol:</label>
                    <select id="rol" name="rol" required>
                        <option value="">Seleccionar rol</option>
                        <option value="empleado">Empleado</option>
                        <option value="gerente">Gerente</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sucursal">Sucursal asignada:</label>
                    <select id="sucursal" name="sucursal" required>
                        <!-- Se cargará dinámicamente -->
                    </select>
                </div>
            </div>

            <div class="form-row password-section">
                <div class="form-group">
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" name="password">
                </div>
                <div class="form-group">
                    <label for="confirm_password">Confirmar contraseña:</label>
                    <input type="password" id="confirm_password" name="confirm_password">
                </div>
            </div>

            <div class="form-group">
                <label class="checkbox-container">
                    <input type="checkbox" id="activo" name="activo" checked>
                    <span class="checkmark"></span>
                    Usuario activo
                </label>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">
                    <i class="fa-solid fa-save"></i> Guardar
                </button>
                <button type="button" class="btn-secondary" onclick="closeUserModal()">
                    <i class="fa-solid fa-times"></i> Cancelar
                </button>
            </div>
        </form>
    </div>
</div>